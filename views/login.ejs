<!DOCTYPE html>
<html>
<%- include('./partials/head')%>

    <body>

        <%- include('./partials/header')%>

            <main id="main-login">

                <div class="card-login">
                    <div class="card-left-login">
                        <div class="card-logo">
                            <img src="images/f-logo/logo-j-color.png" alt="logo">
                        </div>
                        <div class="card-title-login">
                            <h1>Bienvenido</h1>
                        </div>

                        <div class="card-parrafo-login">
                            <p>Gracias por volver, por favor logueate en tu cuenta llenando estos campos</p>
                        </div>
                        <%if(typeof errors != 'undefined'){%>
                            <p style="color: red">ERROR!!</p>
                            <ul>
                                <% errors.forEach(function(elemento){ %>
                                    <li>
                                        <%= elemento.msg %>
                                    </li>

                                    <% }) %>
                            </ul>
                            <% } %>
                                <form action="/login" method="POST" class="card-form" id="form">
                                    <div class="all-inputs">



                                        <div class="form-field">
                                            <label for="email"></label>
                                            <input type="email" id="email" name="email" placeholder="Email" value="<%=data.email%>" required>
                                            <i class="fas fa-check-circle"></i>
                                            <i class="fas fa-exclamation-circle"></i>
                                            <small>Error message</small>
                                        </div>

                                        <div class="form-field">
                                            <label for="password"></label>
                                            <input id="password"type="password" name="password" placeholder="Contraseña" value="<%=data.password%>" required>
                                            <i class="fas fa-check-circle"></i>
                                            <i class="fas fa-exclamation-circle"></i>
                                            <small>Error message</small>
                                        </div>

                                        <div class="check-recover">
                                            <input class="checkbox" name="checkbox" type="checkbox">
                                            <label class="checkbox" for="">Recuerdame</label>
                                            <a class="recover-password" href="*"> Olvidé mi contraseña</a>
                                        </div>

                                        <div class="form-button">
                                            <a href="/register" class="button-signup" >REGISTRARME</a>
                                            <input type="submit" class="button-login" value="INICIAR SESION">
                                            
                                            
                                        </div>
                                    </div>
                                </form>

                                <script>
                                    const form = document.getElementById('form');
                                    const email = document.getElementById('email');
                                    const password = document.getElementById('password');

                                    function checkInputs() {
                                        const emailValue = email.value.trim();
                                        const passwordValue = password.value.trim();
                                        
                                        if(emailValue === '') {
                                            setErrorFor(email, 'Necesitamos tu email');
                                        } else if (!isEmail(emailValue)) {
                                            setErrorFor(email, 'Email inválido');
                                        } else {
                                            setSuccessFor(email);
                                        }
                                        
                                        if(passwordValue === '' || passwordValue.length() < 8) {
                                            setErrorFor(password, 'Contraseña inválida');
                                        } else {
                                            setSuccessFor(password);
                                        }
                                        
                                    }



                                    form.addEventListener('submit', e => {
                                        e.preventDefault();
                                        
                                        checkInputs();
                                    });

                                    function setErrorFor(input, message) {
                                        const formControl = input.parentElement;
                                        const small = formControl.querySelector('small');
                                        formControl.className = 'form-field error';
                                        small.innerText = message;
                                    }

                                    function setSuccessFor(input) {
                                        const formControl = input.parentElement;
                                        formControl.className = 'form-field success';
                                    }
                                        
                                    function isEmail(email) {
                                        return /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(email);
                                    }
                                </script>
                                <div class="card-left-footer">
                                    <p>Log in with</p>
                                    <div class="links-network">
                                        <a href="https://www.google.com.ar"><i class="fab fa-google"></i></a>
                                        <a href="https://www.facebook.com/"><i class="fab fa-facebook-f"></i></i></a>
                                        <a href="https://twitter.com/login?lang=es"><i class="fab fa-twitter"></i></i></a>
                                    </div>


                                </div>
                    </div>
                    <div class="card-right-login">
                        <img src="images/f-login/foto LOGIN.jpg" alt="foto guitarra">
                    </div>
                </div>
            </main>

            <%- include('./partials/footer')%>

    </body>

</html>